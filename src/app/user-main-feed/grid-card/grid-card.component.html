<div class="container mt-4">
    <!-- Spinner shown when isLoading is true -->
    <div *ngIf="isLoading" class="spinner-container">
        <mat-spinner></mat-spinner>
    </div>
    <div class="row" *ngIf="!isLoading">
        <div class="col-md-4 mb-3" *ngFor="let car of displayedCars; let i = index">
            <div class="card">
                <img [src]="car.imgPath" class="card-img-top" alt="{{ car.model }}">
                <div class="card-img-overlay">
                    <div class="card-title">
                        <div class="row">
                            <div class="col-md-8">
                                <p class="car-brand">{{ car.brand }}</p>
                                <p class="car-model">{{ car.model }}</p>
                            </div>
                            <div class="col-md-4 d-flex align-items-center justify-content-end">
                                <!-- Non-favorited Heart (Grey), shown only if the car is not favorited -->
                                <svg *ngIf="!isFavorited(car)" class="favorite-car-icon" (click)="toggleFavorite(car)"
                                    xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none">
                                    <path
                                        d="M16.44 3.10001C14.63 3.10001 13.01 3.98001 12 5.33001C10.99 3.98001 9.37 3.10001 7.56 3.10001C4.49 3.10001 2 5.60001 2 8.69001C2 9.88001 2.19 10.98 2.52 12C4.1 17 8.97 19.99 11.38 20.81C11.72 20.93 12.28 20.93 12.62 20.81C15.03 19.99 19.9 17 21.48 12C21.81 10.98 22 9.88001 22 8.69001C22 5.60001 19.51 3.10001 16.44 3.10001Z"
                                        fill="none" stroke="#91a4c0" stroke-width="1.5" />
                                </svg>

                                <!-- Favorited Heart (Red), shown only if the car is favorited -->
                                <svg *ngIf="isFavorited(car)" class="favorite-car-icon" (click)="toggleFavorite(car)"
                                    xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="#ed3f3f">
                                    <path
                                        d="M16.44 3.10001C14.63 3.10001 13.01 3.98001 12 5.33001C10.99 3.98001 9.37 3.10001 7.56 3.10001C4.49 3.10001 2 5.60001 2 8.69001C2 9.88001 2.19 10.98 2.52 12C4.1 17 8.97 19.99 11.38 20.81C11.72 20.93 12.28 20.93 12.62 20.81C15.03 19.99 19.9 17 21.48 12C21.81 10.98 22 9.88001 22 8.69001C22 5.60001 19.51 3.10001 16.44 3.10001Z"
                                        fill="#ed3f3f" stroke="#ed3f3f" stroke-width="1.5" />
                                </svg>
                            </div>

                        </div>
                        <p class="car-type">{{ car.carType }}</p>
                    </div>
                </div>
                <div class="card-body d-flex flex-column align-items-center justify-content-between">
                    <div class="row mb-4">
                        <div class="col-md-4 d-flex align-items-stretch justify-content-center">
                            <img src="assets/fuel-type.png" alt="Fuel Type" class="specification">
                            <p class="card-text">{{ car.fuelType }}</p>
                        </div>
                        <div class="col-md-4 d-flex align-items-stretch justify-content-center">
                            <img src="assets/trans-type.png" alt="Transmission Type" class="specification">
                            <p class="card-text">{{ car.transType }}</p>
                        </div>
                        <div class="col-md-4 d-flex align-items-stretch justify-content-center">
                            <img src="assets/max-persons.png" alt="Max Persons" class="specification">
                            <p class="card-text">{{ car.maxSeats }} Pax</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 d-flex align-items-center justify-content-start">
                            <p class="price-label">&#8369;{{ car.rentPrice.toFixed(2) }}/day</p>
                        </div>
                        <div class="col-md-6 d-flex align-items-center justify-content-end">
                            <button class="btn btn-primary btn-md" type="button" (click)="goToCarRental(i)">Rent
                                Now</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-12 d-flex justify-content-center">
        <button class="btn btn-primary mt-3" type="button" *ngIf="showSeeMoreButton" (click)="toggleCollapse()"
            data-bs-toggle="collapse" data-bs-target="#collapseRow" aria-expanded="false" aria-controls="collapseRow">
            {{ toggleButtonText }}
        </button>
    </div>
</div>